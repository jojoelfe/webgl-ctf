import{d as y0,b as R0,r as S0,e as I0,o as M0,c as O0,f as M,u as D,w as Q,v as e0,g as L0}from"./index.5cad1641.js";var t0={render(e,t){return"".concat(this.css(e,t),`
            `).concat(this.html())},map(e){return{canvas:e.querySelector("canvas")}},html(e){return"<canvas></canvas>"},css(e,t){return`<style>
      :host {
        position: relative;
        display: inline-block;
        width: `.concat(e||250,`px;
        height: `).concat(t||250,`px;
      }
      :host > canvas {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        width: 100%;
        border-radius: inherit;
      }
    </style>`)}};function U0(e){const t=new Set,r=new Set,n=[];function u(o){e.state==="running"?(console.log("already"),o()):n.push(o)}function i(o){console.log(o),t.add(o.targetElement)}function a(o){t.has(o.targetElement)?t.delete(o.targetElement):c()}function A(){n.forEach(o=>{o()})}function c(){const o=e.createBufferSource();o.buffer=e.createBuffer(1,1,e.sampleRate),o.connect(e.destination),o.start(0),typeof e.resume=="function"&&e.resume().then(A),d()}function l(o){o.addEventListener("touchstart",a),o.addEventListener("touchmove",i),o.addEventListener("touchend",a),o.addEventListener("mouseup",a),r.add(o)}function d(){r.forEach(o=>{o.removeEventListener("touchstart",a),o.removeEventListener("touchmove",i),o.removeEventListener("touchend",a),o.removeEventListener("mouseup",a)}),r.clear(),t.clear()}return{onStart:u,register:l,dispose:d}}const P0=0,D0=1,G=2,N0=3,E0=[{name:"u_time",toyname:"iTime",type:"float",value:0},{name:"u_delta",toyname:"iTimeDelta",type:"float",value:0},{name:"u_date",toyname:"iDate",type:"vec4",value:[0,0,0,0]},{name:"u_frame",toyname:"iFrame",type:"int",value:0}],C=0,H=1,U=2,p0=[{name:"u_resolution",toyname:"iResolution",type:"vec2",value:[0,0]},{name:"u_mouse",toyname:"iCurrentMouse",type:"vec2",value:[0,0]},{name:"u_mousedrag",toyname:"iMouse",type:"vec4",value:[0,0,0,0]}],W=0,v0=[{name:"u_orientation",toyname:"iOrientation",type:"vec3",value:[0,0,0]}],F0=[...E0,...v0,...p0],n0=/\(\s*out\s+vec4\s+(\S+)\s*,\s*in\s+vec2\s+(\S+)\s*\)/;var K=e=>JSON.parse(JSON.stringify(e));function C0(){let e=!1;const t=K(v0);function r(){e||(e=!0,typeof DeviceOrientationEvent=="object"&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(i=>{i==="granted"&&window.addEventListener("deviceorientation",n)}).catch(console.error):window.addEventListener("deviceorientation",n))}function n(i){t[W].value[0]=i.alpha,t[W].value[1]=i.beta,t[W].value[2]=i.gamma}function u(){window.removeEventListener("deviceorientation",n)}return{get ustate(){return t},setup:r,dispose:u}}function X0(e){const t={},r=e.getExtension.bind(e);return{get:function(u){if(t[u]!==void 0)return t[u];const i=r(u)||r("MOZ_".concat(u))||r("WEBKIT_".concat(u));return i===null&&console.warn("<shader-doodle /> ".concat(u," extension not supported.")),t[u]=i,i}}}function B(){const e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl"),r=C0(),n=new(window.AudioContext||window.webkitAudioContext),u=new U0(n);n.onStart=u.onStart,t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.enable(t.BLEND);let i=0,a=0,A=1,c,l,d=new Set;const o=K(E0),s=X0(t);s.get("OES_texture_float"),s.get("OES_texture_float_linear"),s.get("OES_texture_half_float"),s.get("OES_texture_half_float_linear");function v(f,T){f!==i&&(i=f,e.width=Math.floor(i*A)),T!==a&&(a=T,e.height=Math.floor(a*A))}function w(f,T){(f>i||T>a)&&v(Math.max(f,i),Math.max(T,a))}function R(f){const T=l?(f-l)/1e3:0;l=f,o[P0].value+=T,o[D0].value=T,o[N0].value++;const m=new Date;o[G].value[0]=m.getFullYear(),o[G].value[1]=m.getMonth()+1,o[G].value[2]=m.getDate(),o[G].value[3]=m.getHours()*60*60+m.getMinutes()*60+m.getSeconds()+m.getMilliseconds()*.001}function I(f){if(!d.size){c=void 0;return}R(f);const T=[...o,...r.ustate];d.forEach(m=>m.render(e,w,i,a,A,T)),c=requestAnimationFrame(I)}function E(f){u.register(f.dom),f.addClick(r.setup),d.add(f),c||(c=requestAnimationFrame(I))}function h(f){d.delete(f)}function g(f,T,m){for(let b=0;b<o.length;b++)if(o[b].name===f){o[b].value=T,o[b].type=m;return}o.push({name:f,value:T,type:m,toyname:f})}function _(f,T){for(let m=0;m<o.length;m++)if(o[m].name===f){o[m].value=T;break}}function y(){d.forEach(f=>f.dispose()),d.clear(),d=void 0,cancelAnimationFrame(c),r.dispose(),u.dispose()}return t.clearColor(0,0,0,0),Object.freeze({get gl(){return t},get wa(){return n},addSurface:E,removeSurface:h,addUniform:g,setUniform:_,dispose:y})}let X;B.singleton=function(){return X||(X=B()),X};B.resetSingleton=function(){X&&X.dispose(),X=B()};class V extends HTMLElement{get renderer(){return B.singleton()}get name(){return this.getAttribute("name")}set name(t){this.setAttribute("name",t)}}function B0(e,t){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let u=0;u<n;u++){const{name:i}=e.getActiveAttrib(t,u);r[i]=e.getAttribLocation(t,i)}return r}function r0(e){let t,r;const n=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,n);const u=e.createTexture();if(!u)throw new Error("createTexture returned null");e.bindTexture(e.TEXTURE_2D,u),a(!0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,u,0);function i(){e.bindFramebuffer(e.FRAMEBUFFER,n),e.viewport(0,0,t,r)}function a(l){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,l?e.NEAREST:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,l?e.NEAREST:e.LINEAR)}function A(l,d){(l!==t||d!==r)&&(t=l,r=d,e.bindTexture(e.TEXTURE_2D,u),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,l,d,0,e.RGBA,e.FLOAT,null))}function c(){e.deleteFramebuffer(n),e.deleteTexture(u)}return{get handle(){return n},get texture(){return u},updateTexture:a,bind:i,updateResolution:A,dispose:c}}function i0(e,t,r){const n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){const u=e.getShaderInfoLog(n);e.deleteShader(n),console.warn(u,`
in shader:
`,r)}return n}function $(e,t){if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Z(e,t){for(let r=0,n=t.length;r<n;r++)e[r]=t[r]}function V0(e,t,r,n){e[0]!==n&&(r.uniform1f(t,n),e[0]=n)}function G0(e,t,r,n){$(e,n)||(r.uniform2fv(t,n),Z(e,n))}function H0(e,t,r,n){$(e,n)||(r.uniform3fv(t,n),Z(e,n))}function k0(e,t,r,n){$(e,n)||(r.uniform4fv(t,n),Z(e,n))}function z0(e,t,r,n){e[0]!==n&&(r.uniform1i(t,n),e[0]=n)}function j0(e){switch(e){case 5126:return V0;case 35664:return G0;case 35665:return H0;case 35666:return k0;case 35678:case 36198:return z0}}function W0(e,t,r){const n=[],u=j0(t.type);function i(...a){u(n,r,e,...a)}return{get location(){return r},get name(){return t.name},setValue:i}}function q0(e,t){const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let u=0;u<n;u++){const i=e.getActiveUniform(t,u),a=e.getUniformLocation(t,i.name),A=W0(e,i,a);r[A.name]=A}return r}var z=(e,t,r)=>{if(!t)return e[r];const n="toy".concat(r);return e.hasOwnProperty(n)?e[n]:e[r]},Y0=(e,t)=>Object.values(e).reduce((r,n)=>r+"uniform ".concat(z(n,t,"type")," ").concat(z(n,t,"name"),`;
`),"");let J0=0;function K0(e,t){if(t){const r=e.match(n0);e=e.replace("mainImage","main"),e=e.replace(n0,"()"),e=(r?"#define ".concat(r[1],` gl_FragColor
#define `).concat(r[2],` gl_FragCoord.xy
`):"")+e}return e=Y0(F0,t)+e,e=`precision highp float;
`+e,e}function $0(e,t,r,n,u=!1){const i=J0++,a=e.createProgram(),A=e.createBuffer(),c=i0(e,e.VERTEX_SHADER,t),l=i0(e,e.FRAGMENT_SHADER,K0(r,u));e.attachShader(a,c),e.attachShader(a,l),e.linkProgram(a);let d,o,s,v,w;const R=B0(e,a),I=q0(e,a),E=new Set,h=new Set;let g=0;if(!e.getProgramParameter(a,e.LINK_STATUS)){const p=e.getProgramInfoLog(a);console.warn(p)}e.detachShader(a,c),e.detachShader(a,l),e.deleteShader(c),e.deleteShader(l);const _=R.position;e.bindBuffer(e.ARRAY_BUFFER,A),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.enableVertexAttribArray(_),e.vertexAttribPointer(_,2,e.FLOAT,!1,0,0);function y(p,x,F){p.toFbo(x,b(),F),E.add(p)}function f(p){E.delete(p)}function T(p){h.add(p)}function m(p){h.delete(p)}function b(){return g++}function O(p,x,F){d=p,o=x,s=r0(e),F&&(v=r0(e),w=b())}function S(p){const x=I[z(p,u,"name")];x&&x.setValue(z(p,u,"value"))}function L(p){if(p.forEach(S),h.forEach(x=>x.update(S)),v&&I.u_prevbuffer){const x=I.u_prevbuffer;x&&(x.setValue(w),e.activeTexture(e["TEXTURE".concat(w)]),e.bindTexture(e.TEXTURE_2D,v.texture),v.updateTexture())}E.forEach(x=>{I[x.name].setValue(x.u),e.activeTexture(e["TEXTURE".concat(x.u)]),e.bindTexture(e.TEXTURE_2D,x.fbo.texture),x.fbo.updateTexture()})}function N(p,x,F){if(E.size&&E.forEach(j=>j.render(p,x,F)),s){if(v){const j=s;s=v,v=j,v.bind(),v.updateResolution(p,x)}s.updateResolution(p,x),s.bind()}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,p,x);e.clear(e.COLOR_BUFFER_BIT),e.useProgram(a),L(F),e.drawArrays(e.TRIANGLES,0,6)}function P(){h.forEach(p=>p.dispose()),h.clear(),e.deleteProgram(a)}return{get id(){return i},get nodes(){return E},get fbo(){return s},get name(){return d},get u(){return o},render:N,addNode:y,removeNode:f,addTexture:T,removeTexture:m,getTexUnit:b,update:L,toFbo:O,dispose:P}}var Z0=e=>new Promise((t,r)=>{const n=new XMLHttpRequest;n.open("GET",e),n.onreadystatechange=()=>{n.readyState===XMLHttpRequest.DONE&&(n.status===200?t(n.responseText):r(n.status))},n.send()}),s0=async e=>e.src?Z0(e.src):e.text;const Q0=`attribute vec2 position;
void main() {
  gl_Position = vec4(position, 0.0, 1.0);
}`,o0=new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),ee="u_node";let te=0;class T0 extends V{disconnectedCallback(){this.program.dispose(),this.program=void 0}get shadertoy(){return this.hasAttribute("shadertoy")}set shadertoy(t){t?this.setAttribute("shadertoy",""):this.removeAttribute("shadertoy")}get prevbuffer(){return this.hasAttribute("prevbuffer")}set prevbuffer(t){t?this.setAttribute("prevbuffer",""):this.removeAttribute("prevbuffer")}get vertices(){let t=this.getAttribute("vertices");return!t||(t=JSON.parse(t),!Array.isArray(t))?o0:new Float32Array(t)}set vertices(t){!t||!Array.isArray(t)||this.setAttribute("vertices",JSON.stringify(t))}async init(t){t&&!this.name&&(this.name="".concat(ee).concat(te++));const r=[];let n,u;for(let i=0;i<this.children.length;i++){const a=this.children[i];if(a instanceof V)r.push(a);else switch(a.getAttribute("type")){case"x-shader/x-fragment":u=await s0(a);break;case"x-shader/x-vertex":n=await s0(a);break}}n=n||Q0,this.program=$0(this.renderer.gl,n,u,this.vertices,this.shadertoy),r.forEach(i=>{i.init(this.program)}),t&&t.addNode(this.program,this.name,this.prevbuffer)}}customElements.get("sd-node")||customElements.define("sd-node",T0);function A0(e){if(!e)return[0,0];const t=(e.tagName||"").toLowerCase();return t==="video"?[e.videoWidth,e.videoHeight]:t==="img"?[e.naturalWidth,e.naturalHeight]:[e.width,e.height]}const ne=new Uint8Array([0,0,0,255]),k=e=>!(e&e-1)&&!!e,a0=e=>2**Math.floor(Math.log(e)/Math.LN2);function g0(e,t,r={}){const n=e.TEXTURE_2D,u=e.createTexture(),i={},a=[];let A,c;function l(){e.getParameter(e.ACTIVE_TEXTURE)!==t&&e.activeTexture(e["TEXTURE".concat(t)])}function d(){l(),e.bindTexture(n,u)}function o(){const{pixels:E}=i,h=e.getTexParameter(n,e.TEXTURE_WRAP_S),g=e.getTexParameter(n,e.TEXTURE_WRAP_T),_=e.getTexParameter(n,e.TEXTURE_MIN_FILTER),y=k(E.width)&&k(E.height),f=h!==e.CLAMP_TO_EDGE||g!==e.CLAMP_TO_EDGE||_!==e.LINEAR&&_!==e.NEAREST;f&&!y&&(c||(c=document.createElement("canvas"),c.width=a0(E.width),c.height=a0(E.height),console.warn("Texture is not power of two ".concat(E.width," x ").concat(E.height,". Resized to ").concat(c.width," x ").concat(c.height,";"))),c.getContext("2d").drawImage(E,0,0,c.width,c.height)),A=f&&c||E}function s(E){l(),a.length=0,E.forEach(h=>{a.push(h),e.texParameteri(n,h[0],h[1])})}function v(){a.forEach(E=>{e.texParameteri(n,E[0],E[1])})}function w(){d(),v()}function R(E){if(typeof E!="object")return;Object.assign(i,E),d();const{level:h,internalFormat:g,offsetX:_,offsetY:y,width:f,height:T,border:m,format:b,type:O,flipY:S,buffer:L,pixels:N}=i;if(v(),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,S),N){const[P,p]=A0(N);if(P===0||p===0){console.warn("Texture size is invalid ".concat(P," x ").concat(p,". Update is skipped;"));return}o()}if(typeof _=="number"&&typeof y=="number"?A?e.texSubImage2D(n,h,_,y,b,O,A):e.texSubImage2D(n,h,_,y,f,T,b,O,L):A?e.texImage2D(n,h,g,b,O,A):e.texImage2D(n,h,g,f,T,m,b,O,L),A&&k(A.width)&&k(A.height)){const P=e.getTexParameter(n,e.TEXTURE_MIN_FILTER);P!==e.LINEAR&&P!==e.NEAREST&&e.generateMipmap(n)}}function I(){e.deleteTexture(u)}return R(Object.assign({level:0,internalFormat:e.RGBA,offsetX:null,offsetY:null,width:1,height:1,border:0,format:e.RGBA,type:e.UNSIGNED_BYTE,flipY:!0,buffer:ne,pixels:null},typeof r=="object"?r:{})),{setParameters:s,shallow:w,update:R,dispose:I}}function re(e){return new Promise((t,r)=>{const n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onreadystatechange=()=>{n.readyState===XMLHttpRequest.DONE&&(n.status===200||n.status===206?t(n.response):(console.log(n),r(n.status)))},n.send()})}function ie(e,t){return new Promise((r,n)=>{t.decodeAudioData(e,r,n)})}function se(e,t,r,n,u,i,a,A){const c=e.gl,l=e.wa,d=l.createAnalyser();d.fftSize=1024;const o=new Uint8Array(d.frequencyBinCount),s=new Uint8Array(d.frequencyBinCount),v=g0(c,t,{internalFormat:c.LUMINANCE,width:s.length,height:2,format:c.LUMINANCE,buffer:null});v.setParameters([[c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE],[c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE],[c.TEXTURE_MIN_FILTER,c.NEAREST]]);let w,R,I=!1;const E=[{name:r,value:t}];async function h(){R=l.createBufferSource(),R.buffer=await ie(await re(n),l),R.loop=i,R.start(),I=!0}function g(){const m=document.querySelector(n);m&&m instanceof HTMLAudioElement&&(w=m,R=l.createMediaElementSource(m))}function _(m,b){m.connect(d),d.connect(b)}function y(){return I||w&&w.readyState>2&&!w.paused&&!w.ended&&w.currentTime}function f(m){E.forEach(m),y()&&(d.getByteFrequencyData(o),d.getByteTimeDomainData(s),v.update({offsetX:0,offsetY:0,height:1,buffer:o}),v.update({offsetX:0,offsetY:1,height:1,buffer:s}))}function T(){v.dispose()}return n[0]==="#"?g():n&&h(),R&&_(R,l.destination),{dispose:T,update:f}}const oe="u_audio";let ae=0;class ue extends V{disconnectedCallback(){this.program.removeTexture(this.texture),this.texture.dispose()}get src(){return this.getAttribute("src")}set src(t){this.setAttribute("src",t)}get autoplay(){return this.hasAttribute("autoplay")}set autoplay(t){t?this.setAttribute("autoplay",""):this.removeAttribute("autoplay")}get loop(){return this.hasAttribute("loop")}set loop(t){t?this.setAttribute("loop",""):this.removeAttribute("loop")}get crossOrigin(){return this.getAttribute("crossorigin")}set crossOrigin(t){this.setAttribute("crossorigin",t)}get mic(){return this.hasAttribute("mic")}set mic(t){t?this.setAttribute("mic",""):this.removeAttribute("mic")}init(t){this.name||(this.name="".concat(oe).concat(ae++)),this.src&&(this.program=t,this.texture=se(this.renderer,t.getTexUnit(),this.name,this.src,this.mic,this.loop,this.autoplay,this.crossOrigin),t.addTexture(this.texture))}}customElements.get("sd-audio")||customElements.define("sd-audio",ue);function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u0(r,!0).forEach(function(n){ce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u0(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const c0=0,q=1,d0=2,f0=3,fe=/\w+\.(jpg|jpeg|png|gif|bmp)(?=\?|$)/i,he=e=>fe.test(e),le=/\w+\.(mp4|3gp|webm|ogv)(?=\?|$)/i,me=e=>le.test(e);function h0(e){const t=document.createElement("div");t.style.width=t.style.height="1px",t.style.overflow="hidden",t.style.position="absolute",t.style.opacity="0",t.style.pointerEvents="none",t.style.zIndex="-1000",t.appendChild(e),document.body.appendChild(t)}function Ee(e,t,r,n,u,i,a,A,c,l){const d=e.gl,o=g0(d,t);let s,v;const w=[{name:r,value:t},{name:r+"_resolution",value:[0,0]}];function R(){try{s=document.querySelector(n)}catch{console.warn("src: ".concat(n,": invalid selector"))}if(!s){console.warn("src: ".concat(n,": no element could be selected"));return}s instanceof HTMLImageElement?(v=c0,s.complete?E():s.addEventListener("load",E)):s instanceof HTMLVideoElement?v=q:s instanceof HTMLCanvasElement?(v=f0,E()):s instanceof w0?(s=s.surface.dom,v=f0,E()):console.warn("src: ".concat(n,": element is not a valid texture source"))}function I(){v=c0,s=new Image,s.crossOrigin="anonymous",s.onload=E,s.onerror=()=>{console.warn("failed loading src: ".concat(n))},s.src=n}function E(){f(),o.setParameters([[d.TEXTURE_WRAP_S,i],[d.TEXTURE_WRAP_T,a],[d.TEXTURE_MIN_FILTER,A],[d.TEXTURE_MAG_FILTER,c]]),o.update({pixels:s})}function h(){v=q,s=document.createElement("video"),s.autoplay=!0,s.muted=!0,s.loop=!0,s.playsInline=!0,s.crossOrigin="anonymous",s.src=n,h0(s),s.play()}let g=!1;function _(){g||(g=!0,f(),o.setParameters([[d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE],[d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE],[d.TEXTURE_MIN_FILTER,d.LINEAR]]))}function y(){v=d0;const S=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,L=p=>{s=document.createElement("video"),s.width=320,s.height=240,s.autoplay=!0,s.srcObject=p,h0(s)},N=()=>{navigator.mediaDevices.getUserMedia({video:!0}).then(L).catch(p=>console.log(p.name+": "+p.message))},P=()=>{S({video:!0},L,p=>p)};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?N():S&&P()}function f(){if(s){const[S,L]=A0(s);w[1].value[0]=S,w[1].value[1]=L}}function T(){return(v===d0||v===q)&&s instanceof HTMLVideoElement}function m(){return l||T()&&s.readyState===s.HAVE_ENOUGH_DATA}function b(S){w.forEach(S),m()?(T()&&_(),o.update({pixels:s})):o.shallow()}function O(){o.dispose()}return u?y():me(n)?h():he(n)?I():R(),{dispose:O,update:b}}const J=10497,pe=33071,ve=33648,Te=9728,_0=9729,Ae=9984,ge=9985,_e=9986,b0=9987,x0={NEAREST:Te,LINEAR:_0},be=de({},x0,{NEAREST_MIPMAP_NEAREST:Ae,LINEAR_MIPMAP_NEAREST:ge,NEAREST_MIPMAP_LINEAR:_e,LINEAR_MIPMAP_LINEAR:b0}),l0={REPEAT:J,MIRRORED_REPEAT:ve,CLAMP_TO_EDGE:pe},xe="u_texture";let we=0;class ye extends V{static get observedAttributes(){return["mag-filter","min-filter","name","src","wrap-s","wrap-t"]}disconnectedCallback(){this.program.removeTexture(this.texture),this.texture.dispose()}get forceUpdate(){return this.hasAttribute("force-update")}set forceUpdate(t){t?this.setAttribute("force-update",""):this.removeAttribute("force-update")}get magFilter(){return x0[this.getAttribute("mag-filter")]||_0}get minFilter(){return be[this.getAttribute("min-filter")]||b0}get src(){return this.getAttribute("src")}set src(t){this.setAttribute("src",t)}get webcam(){return this.hasAttribute("webcam")}set webcam(t){t?this.setAttribute("webcam",""):this.removeAttribute("webcam")}get wrapS(){return l0[this.getAttribute("wrap-s")]||J}get wrapT(){return l0[this.getAttribute("wrap-t")]||J}init(t){this.name||(this.name="".concat(xe).concat(we++)),!(!this.src&&!this.webcam)&&(this.program=t,this.texture=Ee(this.renderer,t.getTexUnit(),this.name,this.src,this.webcam,this.wrapS,this.wrapT,this.minFilter,this.magFilter,this.forceUpdate),t.addTexture(this.texture))}}customElements.get("sd-texture")||customElements.define("sd-texture",ye);class Re extends V{disconnectedCallback(){}get x(){return parseFloat(this.getAttribute("x"))}set x(t){t!=null?this.setAttribute("x",t):this.removeAttribute("x")}get y(){return parseFloat(this.getAttribute("y"))}set y(t){t!=null?this.setAttribute("y",t):this.removeAttribute("y")}get z(){return parseFloat(this.getAttribute("z"))}set z(t){t!=null?this.setAttribute("z",t):this.removeAttribute("z")}get w(){return parseFloat(this.getAttribute("w"))}set w(t){t!=null?this.setAttribute("w",t):this.removeAttribute("w")}getValue(){switch(this.type){case"vec2":return[this.x,this.y];case"vec3":return[this.x,this.y,this.z];case"vec4":return[this.x,this.y,this.z,this.w];default:return this.x}}get type(){return this.getAttribute("type")}set type(t){t!=null?this.setAttribute("type",t):this.removeAttribute("type")}static get observedAttributes(){return["x","y","z","w"]}attributeChangedCallback(t,r,n){switch(t){case"x":case"y":case"z":case"w":n!=null&&this.renderer.setUniform(this.name,this.getValue());break}}init(t){if(!this.name){console.warn("sd-uniform created without a name.");return}this.program=t,this.renderer.addUniform(this.name,this.getValue(),this.type)}}customElements.get("sd-uniform")||customElements.define("sd-uniform",Re);const Se=new Set(["touchstart","touchmove","touchend"]),Ie=e=>Se.has(e.type)&&typeof e.touches[0]=="object"?e.touches[0]:e;var m0=e=>{const t=Ie(e);return[t.clientX||0,t.clientY||0]};function Me(e){const t=e.canvas instanceof HTMLCanvasElement?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=t.getContext("2d"),n=e.program,u=new Set,i=K(p0);let a={},A,c,l;function d(h){u.forEach(T=>typeof T=="function"&&T()),l=!0;const g=m0(h),{top:_,left:y,height:f}=a;i[U].value[0]=i[U].value[2]=g[0]-Math.floor(y),i[U].value[1]=i[U].value[3]=Math.floor(f)-(g[1]-Math.floor(_))}function o(h){if(!c){const g=m0(h),{top:_,left:y,height:f}=a;i[H].value[0]=g[0]-Math.floor(y),i[H].value[1]=Math.floor(f)-(g[1]-Math.floor(_)),l&&(i[U].value[0]=i[H].value[0],i[U].value[1]=i[H].value[1]),c=!0}}function s(h){l=!1,Math.sign(i[U].value[2])===1&&(i[U].value[2]*=-1),Math.sign(i[U].value[3])===1&&(i[U].value[3]*=-1)}function v(){w(),c=!1}function w(){const h=t.getBoundingClientRect();A=h.top+h.height>=0&&h.left+h.width>=0&&h.bottom-h.height<=(window.innerHeight||document.documentElement.clientHeight)&&h.right-h.width<=(window.innerWidth||document.documentElement.clientWidth);const g=e.height>0?e.height:h.height,_=e.width>0?e.width:h.width;_!==i[C].value[0]&&(t.width=i[C].value[0]=_),g!==i[C].value[1]&&(t.height=i[C].value[1]=g),a=h}function R(h,g,_,y,f,T){if(v(),!A||!n)return;const m=i[C].value[0]||0,b=i[C].value[1]||0;g(m,b),n.render(m,b,[...T,...i]);const O=m*f,S=b*f;r.clearRect(0,0,O,S),r.drawImage(h,0,y-S,O,S,0,0,O,S)}function I(h){u.add(h)}function E(){u.clear(),t.removeEventListener("mousedown",d),t.removeEventListener("mousemove",o),t.removeEventListener("mouseup",s),t.removeEventListener("mouseout",s),t.removeEventListener("touchstart",d),t.removeEventListener("touchmove",o),t.removeEventListener("touchend",s)}return t.addEventListener("mousedown",d),t.addEventListener("mousemove",o),t.addEventListener("mouseup",s),t.addEventListener("mouseout",s),t.addEventListener("touchstart",d),t.addEventListener("touchmove",o),t.addEventListener("touchend",s),w(),Object.freeze({get dom(){return t},render:R,addClick:I,dispose:E})}class w0 extends T0{static get observedAttributes(){return["height","width"]}constructor(){super();this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){this.shadow.innerHTML=t0.render(this.width,this.height),this.canvas=t0.map(this.shadow).canvas,setTimeout(()=>{try{this.init()}catch(t){console.error(t&&t.message||"Error in shader-doodle.")}})}disconnectedCallback(){super.disconnectedCallback(),this.renderer.removeSurface(this.surface),this.surface.dispose(),this.surface=void 0}attributeChangedCallback(t){const r=this.shadow.styleSheets;if((t==="height"||t==="width")&&r.length>0){const n=this[t];r[0].cssRules[0].style[t]=Number.isInteger(n)?"".concat(n,"px"):"250px"}}get height(){const t=parseInt(this.getAttribute("height"));return Number.isInteger(t)?t:void 0}set height(t){const r=parseInt(t);!Number.isInteger(r)||this.setAttribute("height",t)}get width(){const t=parseInt(this.getAttribute("width"));return Number.isInteger(t)?t:void 0}set width(t){const r=parseInt(t);!Number.isInteger(r)||this.setAttribute("width",r)}async init(){await super.init(),this.surface=Me(this),this.renderer.addSurface(this.surface)}}customElements.get("shader-doodle")||customElements.define("shader-doodle",w0);let Y=[[.95588623,.91961077,.95812116],[.94967876,.91615763,.95315546],[.94353853,.91268927,.94824212],[.9374452,.90921449,.94337733],[.93140447,.90573033,.93856712],[.92542215,.90223373,.93381777],[.91947392,.89873478,.92912752],[.91357865,.89522463,.92450721],[.90772105,.89170929,.91995838],[.90189106,.88819234,.91548457],[.8960938,.8846711,.91109116],[.89031153,.88115247,.90677917],[.88453669,.87763908,.90255063],[.87877004,.87413042,.89840629],[.87299914,.87063131,.89434535],[.86721094,.86714674,.89036725],[.86141058,.86367475,.88646923],[.85559299,.86021735,.88264858],[.84974682,.85677881,.87890418],[.84387192,.85335917,.87523342],[.83797164,.84995717,.87163289],[.83204469,.84657319,.86810058],[.82609045,.84320733,.86463493],[.82010052,.83986227,.86123767],[.81408416,.83653448,.85790541],[.80804251,.83322322,.85463767],[.80197661,.82992779,.85143441],[.79588772,.82664733,.84829592],[.78977733,.82338091,.8452227],[.78364717,.82012747,.84221541],[.7774989,.81688599,.83927495],[.77133274,.81365586,.83640309],[.76515383,.81043494,.83359933],[.75896452,.80722199,.83086447],[.75276734,.80401573,.82819926],[.74656497,.80081486,.82560433],[.74036019,.79761806,.82308018],[.73415594,.79442399,.82062712],[.72795524,.79123135,.81824533],[.7217612,.78803884,.81593475],[.71557653,.78484528,.81369544],[.70940398,.78164957,.81152729],[.70324772,.77845022,.80942895],[.69711099,.77524608,.8073995],[.69099696,.77203607,.8054378],[.68490872,.76881916,.80354253],[.67884928,.76559441,.80171222],[.67282151,.76236096,.79994524],[.66682814,.75911802,.79823983],[.66087179,.7558649,.79659413],[.65495439,.75260107,.7950067],[.64907877,.74932586,.79347499],[.64324724,.74603878,.79199677],[.63746171,.74273942,.79056997],[.63172396,.73942747,.7891925],[.62603562,.73610266,.78786229],[.62039814,.73276477,.78657732],[.61481293,.72941363,.78533547],[.60928127,.72604912,.7841347],[.60380419,.72267116,.78297314],[.59838267,.71927971,.78184895],[.59301756,.71587476,.78076036],[.58770967,.7124563,.77970565],[.5824597,.70902436,.77868317],[.57726849,.70557897,.77769104],[.5721366,.70212016,.77672775],[.56706445,.69864803,.7757921],[.56205254,.69516262,.77488269],[.55710135,.69166401,.7739982],[.55221135,.68815225,.77313735],[.54738299,.68462741,.77229891],[.54261669,.68108954,.7714817],[.53791302,.6775387,.77068427],[.53327235,.67397494,.76990557],[.52869499,.67039831,.76914482],[.52418136,.66680884,.76840101],[.51973187,.66320657,.76767313],[.51534697,.65959152,.76696023],[.51102708,.6559637,.76626135],[.50677264,.65232312,.76557558],[.50258409,.64866978,.76490201],[.49846187,.64500368,.76423976],[.49440652,.64132483,.7635876],[.49041839,.63763319,.76294498],[.48649792,.63392874,.76231111],[.48264558,.63021144,.76168515],[.4788618,.62648125,.76106626],[.47514703,.62273814,.76045361],[.4715017,.61898207,.75984637],[.46792623,.61521297,.75924371],[.46442103,.6114308,.75864479],[.4609865,.6076355,.7580488],[.45762301,.60382702,.7574549],[.45433091,.60000529,.75686228],[.45111051,.59617026,.75626997],[.44796212,.59232188,.75567717],[.44488599,.58846006,.75508316],[.44188237,.58458473,.7544871],[.43895145,.58069584,.75388814],[.43609336,.5767933,.75328544],[.43330824,.57287707,.75267815],[.43059613,.56894708,.75206541],[.42795705,.56500326,.75144639],[.42539095,.56104556,.75082021],[.42289775,.55707392,.75018601],[.42047728,.55308828,.74954294],[.41812934,.54908859,.74889012],[.41585365,.54507481,.7482267],[.41364987,.54104688,.7475518],[.41151761,.53700476,.74686455],[.40945636,.53294843,.74616402],[.40746562,.52887785,.74544937],[.40554478,.52479298,.74471976],[.4036932,.52069379,.74397434],[.40191012,.51658025,.74321222],[.40019476,.51245234,.74243254],[.39854625,.50831006,.74163443],[.39696364,.50415338,.74081703],[.39544595,.4999823,.73997947],[.39399211,.49579683,.7391209],[.39260099,.49159695,.73824046],[.39127141,.48738268,.73733729],[.39000213,.48315403,.73641054],[.38879184,.478911,.73545936],[.3876392,.47465363,.73448291],[.38654279,.47038193,.73348035],[.38550116,.46609593,.73245082],[.38451281,.46179566,.73139351],[.3835762,.45748116,.73030757],[.38268975,.45315247,.72919218],[.38185182,.44880962,.7280465],[.38106076,.44445268,.72686969],[.38031486,.44008169,.72566094],[.37961245,.43569671,.72441943],[.37895177,.43129778,.72314434],[.37833106,.42688498,.72183484],[.37774855,.42245837,.72049011],[.37720243,.41801803,.71910933],[.37669089,.41356403,.71769166],[.37621211,.40909646,.71623627],[.37576424,.4046154,.71474232],[.37534545,.40012094,.71320896],[.3749539,.39561319,.71163536],[.37458773,.39109226,.71002064],[.3742451,.38655825,.70836394],[.37392415,.38201129,.7066644],[.37362303,.3774515,.70492111],[.37333991,.37287903,.70313318],[.37307294,.36829402,.70129969],[.37282029,.36369664,.69941971],[.37258013,.35908705,.69749231],[.37235064,.35446544,.6955165],[.37212999,.349832,.69349132],[.3719164,.34518697,.69141574],[.37170804,.34053056,.68928875],[.37150314,.33586303,.68710929],[.37130003,.33118458,.68487633],[.37109685,.32649557,.68258873],[.3708918,.32179632,.68024534],[.37068312,.31708718,.67784499],[.37046904,.31236853,.67538648],[.3702478,.3076408,.67286859],[.37001764,.30290445,.67029004],[.3697768,.29815996,.66764952],[.36952351,.29340788,.6649457],[.36925602,.28864881,.66217719],[.36897256,.28388339,.65934258],[.36867134,.27911233,.6564404],[.36835059,.27433641,.65346914],[.3680085,.26955647,.65042726],[.36764328,.26477344,.64731318],[.36725311,.25998832,.64412527],[.3668366,.25520194,.64086184],[.36639158,.2504157,.63752117],[.36591607,.24563096,.63410149],[.36540817,.24084915,.63060103],[.36486595,.23607183,.62701797],[.36428747,.2313007,.62335047],[.36367073,.2265376,.61959664],[.36301372,.22178452,.61575461],[.36231439,.21704365,.61182247],[.36157068,.21231734,.60779834],[.36078129,.20760765,.60367993],[.35994327,.20291779,.59946566],[.35905442,.19825076,.59515371],[.35811253,.19360973,.59074229],[.35711536,.18899812,.5862297],[.35606065,.18441957,.5816143],[.35494612,.17987796,.57689459],[.35377006,.17537711,.57206861],[.35252969,.17092163,.56713551],[.35122252,.1665162,.56209448],[.34984626,.16216558,.55694478],[.34839867,.15787473,.5516859],[.34687754,.15364873,.54631766],[.34528103,.14949272,.54083967],[.34360674,.1454121,.535253],[.34185263,.14141215,.5295588],[.34001688,.13749807,.52375852],[.33809785,.13367489,.51785407],[.33609404,.12994744,.51184794],[.33400409,.12632016,.50574349],[.33182701,.12279709,.49954424],[.32956205,.11938176,.49325427],[.32720876,.11607711,.48687817],[.32476698,.1128854,.48042104],[.32223661,.10980755,.47389029],[.31961836,.10684434,.46729116],[.31691312,.10399563,.46062961],[.31412208,.10126033,.45391229],[.31124668,.09863647,.44714607],[.30828872,.09612127,.44033795],[.30525021,.09371113,.433495],[.30213347,.09140049,.42662674],[.29894109,.08918489,.41973884],[.29567576,.08705943,.41283683],[.2923403,.08501829,.40592705],[.28893761,.08305536,.39901552],[.28547067,.08116432,.39210787],[.28194249,.07933875,.38520933],[.27835606,.07757226,.37832469],[.27471434,.07585853,.37145825],[.27102024,.07419145,.36461386],[.26727656,.0725651,.35779486],[.263486,.07097387,.35100416],[.25965113,.06941247,.34424417],[.2557744,.06787594,.33751691],[.2518586,.06635773,.33082656],[.24790678,.06485041,.32417842],[.24392,.06335391,.31756813],[.23990011,.0618647,.31099621],[.23584881,.06037959,.30446287],[.23176762,.05889569,.29796805],[.22765793,.05741044,.29151145],[.2235249,.0559091,.28510781],[.21936673,.05439937,.2787442],[.21518395,.05288082,.27241805],[.21097738,.05135188,.26612831],[.20675095,.04980177,.25988492],[.20250558,.04822872,.25368699],[.19823879,.04664038,.24752274],[.19395092,.04503581,.24139075],[.18964939,.04339464,.2353118],[.18532874,.04173194,.22926588],[.18098806,.04004406,.22324832],[.17663372,.03832764,.21727622],[.1722628,.0366263,.21133883],[.16787203,.03494898,.20542535],[.16346916,.03327796,.19955633],[.15904897,.03162694,.19371576],[.15460852,.03000286,.18789489],[.15015881,.02838308,.18212224],[.1456879,.02679372,.17636536],[.14120085,.02522488,.17063713],[.13669847,.02367601,.16493914],[.13217294,.02216185,.15925166],[.13715771,.0238647,.16279915],[.142138,.02560107,.16632081],[.14712696,.02735575,.16981697],[.15211729,.02913553,.17328696],[.15711127,.03093684,.17673054],[.1621132,.03275335,.18014741],[.16711334,.03459602,.18353723],[.17212778,.03644357,.18689953],[.17714184,.03831372,.19023414],[.18216272,.04019623,.19354057],[.18719181,.04204197,.19681833],[.19222138,.04385446,.20006748],[.19726438,.04562162,.20328673],[.20231059,.04735883,.20647637],[.20736026,.04906721,.20963605],[.21242374,.05073417,.21276409],[.21748944,.05237662,.21586133],[.22256097,.05399093,.21892687],[.2276448,.05556951,.22195906],[.2327317,.05712593,.22495882],[.23782409,.05865801,.2279252],[.24292948,.06015655,.23085593],[.24803856,.06163518,.23375227],[.25315165,.06309447,.23661359],[.25827753,.06452336,.23943683],[.26340901,.06593256,.24222299],[.26854476,.0673248,.24497172],[.27368637,.06869883,.24768176],[.27883959,.07004759,.25035015],[.28399705,.0713821,.2529784],[.28915882,.07270312,.2555656],[.29432497,.07401148,.25811079],[.29950154,.07529967,.26061023],[.30468256,.07657683,.26306525],[.30986729,.07784489,.26547507],[.31505561,.07910492,.2678386],[.32024732,.0803581,.2701547],[.32544482,.08160204,.27242069],[.33064667,.08283969,.27463586],[.33585053,.08407525,.27680013],[.34105598,.08531029,.27891231],[.34626256,.08654644,.28097121],[.35146972,.08778547,.28297562],[.35667687,.08902924,.28492434],[.36188334,.09027973,.28681618],[.36708839,.09153902,.28864998],[.37229131,.09280915,.2904245],[.37749189,.09409153,.29213802],[.38268807,.09539008,.29379048],[.38787885,.09670726,.29538088],[.39306317,.09804561,.29690835],[.39823991,.09940776,.29837204],[.40340787,.10079637,.29977124],[.40856581,.10221419,.30110533],[.41371275,.10366356,.30237338],[.41884758,.10514695,.30357463],[.42396841,.1066678,.3047094],[.42907377,.10822892,.30577763],[.43416218,.10983307,.3067794],[.43923211,.11148296,.30771496],[.44428204,.11318118,.30858474],[.44931042,.11493024,.30938934],[.45431572,.11673249,.31012956],[.45929645,.11859012,.31080632],[.46425232,.12050381,.31141829],[.46918047,.12247703,.31196941],[.47407948,.12451142,.31246122],[.47894794,.12660841,.31289546],[.48378454,.12876919,.31327402],[.48858861,.13099415,.31359736],[.49335851,.13328448,.3138686],[.4980928,.13564099,.31409096],[.50279043,.13806389,.31426689],[.50745058,.1405531,.31439855],[.51207262,.14310825,.31448774],[.51665528,.1457293,.31453872],[.52119791,.14841559,.31455424],[.52569995,.15116629,.31453693],[.53016101,.15398036,.31448913],[.53458045,.1568568,.31441462],[.53895794,.15979435,.31431622],[.54329324,.16279163,.31419663],[.54758618,.16584718,.31405871],[.55183659,.16895949,.3139054],[.55604443,.17212695,.31373936],[.56020971,.17534794,.31356335],[.56433247,.1786208,.31338008],[.56841285,.18194387,.31319183],[.57245099,.1853155,.31300097],[.57644706,.18873401,.31281029],[.58040129,.19219776,.31262196],[.58431392,.19570523,.31243779],[.58818523,.19925487,.31225983],[.59201548,.20284508,.31209072],[.59580496,.20647443,.31193222],[.59955398,.2101416,.31178574],[.60326283,.21384527,.31165305],[.60693181,.21758404,.31153632],[.61056126,.22135662,.31143744],[.61415144,.22516202,.3113573],[.61770261,.22899913,.31129746],[.62121505,.23286692,.3112594],[.62468917,.23676405,.31124564],[.6281251,.24068989,.31125653],[.63152309,.24464358,.3112934],[.63488335,.24862429,.3113576],[.63820616,.25263112,.31145067],[.64149182,.25666317,.31157436],[.64474038,.26072,.31172919],[.64795203,.26480095,.3119164],[.65112691,.26890541,.31213721],[.65426523,.27303275,.31239299],[.65736724,.27718218,.31268539],[.66043291,.28135348,.31301496],[.66346234,.28554617,.31338289],[.66645563,.28975979,.31379035],[.66941285,.29399391,.31423853],[.67233423,.29824791,.31472899],[.67521975,.30252154,.31526265],[.67806939,.30681452,.31584052],[.68088318,.3111265,.31646379],[.68366117,.31545715,.31713364],[.68640337,.31980615,.31785128],[.68910996,.324173,.31861821],[.69178081,.32855759,.31943534],[.6944159,.33295966,.32030382],[.69701522,.33737894,.32122489],[.69957876,.34181516,.32219978],[.70210653,.34626807,.3232297],[.7045986,.35073729,.32431605],[.70705492,.35522263,.32545997],[.70947542,.3597239,.32666265],[.7118601,.36424085,.32792534],[.71420894,.36877323,.3292493],[.71652194,.37332079,.3306358],[.71879913,.37788325,.33208612],[.72104061,.38246028,.3336016],[.72324628,.38705172,.33518339],[.72541618,.3916573,.33683277],[.72755035,.39627674,.33855099],[.72964884,.40090978,.34033932],[.73171172,.40555611,.34219899],[.73373911,.41021541,.34413127],[.73573115,.41488736,.34613738],[.73768789,.41957169,.34821851],[.73960949,.42426807,.35037584],[.7414961,.42897616,.35261056],[.74334793,.43369562,.35492382],[.74516521,.43842607,.35731674],[.74694821,.44316712,.35979044],[.74869724,.44791835,.36234598],[.75041257,.4526794,.36498439],[.75209454,.45744986,.36770666],[.75374356,.46222929,.37051374],[.75536003,.46701725,.37340656],[.75694444,.47181326,.37638597],[.75849733,.47661683,.37945279],[.76001934,.48142741,.38260777],[.76151097,.48624456,.38585161],[.76297286,.49106776,.38918495],[.76440573,.49589647,.39260837],[.76581031,.50073015,.39612236],[.76718741,.50556824,.39972737],[.76853788,.51041015,.40342376],[.76986291,.51525513,.40721173],[.77116324,.52010271,.41109152],[.77243989,.5249523,.41506327],[.77369391,.52980327,.41912699],[.77492645,.53465502,.42328264],[.77613869,.53950688,.42753006],[.77733187,.54435824,.43186902],[.77850729,.54920844,.43629918],[.77966679,.55405656,.44081985],[.78081138,.55890219,.4454307],[.78194248,.56374468,.45013112],[.7830616,.5685834,.45492037],[.78417029,.57341769,.45979765],[.78527014,.57824693,.46476204],[.78636281,.58307048,.46981252],[.78744997,.58788771,.474948],[.78853333,.59269801,.48016727],[.78961491,.59750067,.48546886],[.79069671,.60229498,.49085119],[.79178009,.6070806,.49631312],[.79286688,.61185698,.50185312],[.7939589,.61662359,.50746956],[.79505802,.62137992,.51316075],[.79616609,.62612549,.51892492],[.79728497,.63085984,.52476024],[.79841652,.63558252,.53066483],[.7995626,.64029314,.53663673],[.80072505,.64499131,.54267394],[.80190568,.64967668,.54877442],[.80310632,.65434893,.55493609],[.80432873,.65900778,.56115682],[.80557466,.66365295,.56743447],[.80684582,.66828424,.57376686],[.80814389,.67290145,.58015179],[.8094705,.67750443,.58658707],[.81082722,.68209304,.59307049],[.81221558,.68666721,.59959981],[.81363705,.69122688,.60617284],[.81509306,.69577202,.61278737],[.81658494,.70030265,.6194412],[.81811398,.70481883,.62613217],[.81968139,.70932062,.63285811],[.82128832,.71380816,.63961689],[.82293582,.71828159,.64640643],[.82462489,.7227411,.65322464],[.82635642,.72718691,.66006948],[.82813124,.73161926,.66693898],[.82995006,.73603846,.67383115],[.83181351,.74044483,.68074409],[.83372214,.74483873,.68767592],[.83567636,.74922057,.69462479],[.83767708,.75359061,.70158791],[.83972535,.75794913,.70856199],[.84181991,.76229704,.71554745],[.84396065,.76663495,.72254259],[.84614733,.77096352,.72954568],[.8483795,.77528348,.73655503],[.85065653,.77959564,.74356888],[.85297758,.7839009,.75058542],[.8553436,.7881998,.75759877],[.8577521,.79249376,.76460878],[.86020061,.79678427,.77161459],[.8626872,.80107277,.77861331],[.86520968,.80536087,.78560141],[.86776571,.8096503,.79257445],[.87035656,.81394216,.79951954],[.87297684,.81823907,.80643635],[.87562545,.82254271,.81331573],[.87830287,.82685434,.8201464],[.88101291,.83117417,.82691355],[.88376436,.8355008,.83359813],[.88656419,.83983241,.84019282],[.88942615,.84416471,.84668696],[.89236612,.84849196,.85307571],[.89540326,.85280703,.85935491],[.89854578,.85710498,.86554325],[.90180023,.86138156,.87165915],[.90516762,.86563454,.87772373],[.90864556,.86986351,.88375343],[.91222303,.87407051,.8897753],[.91589042,.87825797,.89580632],[.91963903,.88242879,.9018554],[.92345937,.88658601,.90793267],[.92734253,.89073234,.914049],[.93128235,.89487013,.92020762],[.93527444,.89900167,.92640565],[.93931328,.90312833,.93265281],[.94339574,.90725141,.93895042],[.9475205,.91137261,.94528884],[.95168443,.9154922,.95167893],[.95588623,.91961077,.95812116],[.95588623,.91961077,.95812116]];const Oe={width:"512",height:"512"},Le=M("sd-texture",{src:"#twilight",name:"u_twilight"},null,-1),Ue=["x"],Pe=["x"],De=["x"],Ne=["x"],Fe=["x"],Ce=["x"],Xe=["x"],Be={style:{display:"flex","flex-direction":"row"}},Ve={id:"twilight",width:"1",height:"512"},Ge=M("div",{style:{display:"flex","flex-direction":"column","justify-content":"space-between",height:"100%"}},[M("span",null,"2\u03C0"),M("span",null,"\u03C0"),M("span",null,"0")],-1),ke=y0({props:{shader:String},setup(e){const t=e;L0();const r=R0(),n=S0(null);function u(){let i=n.value;document.getElementById("glsl-script")!==null&&document.getElementById("glsl-script").remove();let a=document.createElement("script");a.id="glsl-script",a.textContent=t.shader,a.setAttribute("type","x-shader/x-fragment"),i.firstChild.appendChild(a)}return I0(()=>{u();let a=document.getElementById("twilight").getContext("2d"),A=a.getImageData(0,0,1,512),c=A.data;for(let l=0;l<512;l++)c[l*4]=Y[l][0]*255,c[l*4+1]=Y[l][1]*255,c[l*4+2]=Y[l][2]*255,c[l*4+3]=255;a.putImageData(A,0,0)}),(i,a)=>(M0(),O0("div",{class:"ctfvis",ref_key:"ctfvis",ref:n,style:{display:"flex","flex-direction":"row"}},[M("shader-doodle",Oe,[Le,M("sd-uniform",{name:"defocus",x:D(r).defocus,type:"float"},null,8,Ue),M("sd-uniform",{name:"pixel_size",x:D(r).pixel_size,type:"float"},null,8,Pe),M("sd-uniform",{name:"ac",x:D(r).ac,type:"float"},null,8,De),M("sd-uniform",{name:"spherical_aberration_mm",x:D(r).spherical_aberration,type:"float"},null,8,Ne),M("sd-uniform",{name:"voltage",x:D(r).voltage,type:"float"},null,8,Fe),M("sd-uniform",{name:"astigmatism",x:D(r).astigmatism,type:"float"},null,8,Ce),M("sd-uniform",{name:"astigmatism_angle",x:D(r).astigmatism_angle,type:"float"},null,8,Xe)]),Q(M("div",Be,[Q(M("canvas",Ve,null,512),[[e0,i.$route.name==="phase"]]),Ge],512),[[e0,i.$route.name==="phase"]])],512))}});export{ke as _};
